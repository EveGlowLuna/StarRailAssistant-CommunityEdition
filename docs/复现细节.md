# StarRailAssistant (SRA) 前端程序完整技术文档

## 📋 目录
1. [项目概述](#项目概述)
2. [系统架构](#系统架构)
3. [配置文件系统](#配置文件系统)
4. [任务配置详解](#任务配置详解)
5. [系统设置详解](#系统设置详解)
6. [进程执行系统](#进程执行系统)
7. [更新系统](#更新系统)
8. [UI界面结构](#ui界面结构)
9. [API接口](#api接口)
10. [错误处理](#错误处理)
11. [完整关卡列表](#完整关卡列表)
12. [完整任务选项列表](#完整任务选项列表)

---

## 🎯 项目概述

StarRailAssistant (SRA) 是一个《崩坏：星穹铁道》游戏自动化辅助工具的前端程序，使用Avalonia UI框架开发，主要功能包括：

- 🎮 游戏任务自动化配置
- ⚙️ 多配置方案管理
- 🔄 实时任务执行监控
- 📊 后端进程日志显示
- 🔧 系统设置管理
- 🔄 自动更新功能

---

## 🏗️ 系统架构

### 主要组件

| 组件 | 功能描述 | 对应文件 |
|------|----------|----------|
| `MainWindow` | 主窗口，包含侧边栏导航 | `MainWindow.axaml` |
| `HomePage` | 主页，显示控制面板 | `HomePageView.axaml` |
| `TaskPage` | 任务配置页面 | `TaskPageView.axaml` |
| `ConsolePage` | 控制台页面，显示后端日志 | `ConsolePageView.axaml` |
| `SettingsPage` | 系统设置页面 | `SettingsPageView.axaml` |
| `SraService` | 后端进程管理服务 | `SraService.cs` |
| `ConfigService` | 配置管理服务 | `ConfigService.cs` |
| `UpdateService` | 更新管理服务 | `UpdateService.cs` |

### 数据流向
```
用户界面 → ViewModel → Service → 后端进程(SRA-cli.exe)
```

---

## 📁 配置文件系统

### 配置文件存储位置
```
%APPDATA%\SRA\
├── settings.json          # 系统设置
├── cache.json             # 缓存数据
└── configs\               # 任务配置文件夹
    ├── Default.json       # 默认配置
    ├── Config1.json       # 自定义配置1
    └── Config2.json       # 自定义配置2
```

### 缓存文件结构 (cache.json)
```json
{
  "CdkStatus": "",                    // CDK验证状态文本
  "CdkStatusForeground": "#F5222D",   // CDK状态颜色
  "ConfigNames": ["Default"],         // 配置名称列表
  "CurrentConfigIndex": 0,            // 当前配置索引
  "CurrentConfigName": "Default"      // 当前配置名称
}
```

---

## ⚙️ 任务配置详解

### 配置文件结构 (configs/{name}.json)

```json
{
  "Name": "配置名称",                    // 配置名称，默认为 "Default"
  "Version": 3,                         // 配置版本号，固定为3
  "EnabledTasks": [false, false, false, false, false],  // 各任务启用状态

  // 启动游戏配置
  "StartGameAlwaysLogin": false,        // 游戏启动时是否总是登录
  "StartGameAutoLogin": false,          // 启动游戏时是否自动登录
  "StartGameChannel": 0,                // 游戏启动通道 (0=官服, 1=b服)
  "StartGamePassword": "",              // 游戏启动密码
  "StartGamePath": "",                  // 游戏启动路径
  "StartGameUsername": "",              // 游戏启动用户名

  // 清体力配置
  "TrailblazePowerTaskList": [],        // 体力任务列表
  "TrailblazePowerReplenishStamina": false,     // 是否补充体力
  "TrailblazePowerReplenishWay": 0,             // 补充体力方式 (0=后备开拓力, 1=燃料, 2=星琼)
  "TrailblazePowerUseAssistant": false,         // 是否使用支援角色
  "TrailblazePowerChangeLineup": false,         // 是否重新编队
  "TrailblazePowerLineupCheck": false,          // 是否检查阵容
  "TrailblazePowerUseSkill": false,             // 是否使用战技入场

  // 领取奖励配置
  "ReceiveRewards": [false, false, false, false, false, false, false],  // 各奖励领取状态
  "ReceiveRewardRedeemCodes": "",       // 兑换码列表

  // 模拟宇宙配置
  "SimulatedUniverseMode": 0,           // 模拟宇宙模式 (0=普通模式, 1=困难模式)
  "SimulatedUniverseTimes": 0,          // 模拟宇宙运行次数

  // 任务完成后配置
  "AfterLogout": false,                 // 任务完成后是否登出
  "AfterExitGame": false,               // 任务完成后退出游戏
  "AfterExitApp": false,                // 任务完成后退出 SRA
  "AfterSleep": false,                  // 任务完成后休眠
  "AfterShutdown": false                // 任务完成后关机
}
```

默认配置文件样式：
```json
{
  "StartGamePassword": "",
  "StartGameUsername": "",
  "Version": 3,
  "AfterExitApp": false,
  "AfterExitGame": false,
  "AfterLogout": false,
  "AfterShutdown": false,
  "AfterSleep": false,
  "EnabledTasks": [
    false,
    false,
    false,
    false,
    false
  ],
  "Name": "Default",
  "ReceiveRewardRedeemCodes": "",
  "ReceiveRewards": [
    false,
    false,
    false,
    false,
    false,
    false,
    false
  ],
  "SimulatedUniverseEnable": false,
  "SimulatedUniverseMode": 0,
  "SimulatedUniversePolicy": 0,
  "SimulatedUniverseRunTimes": 0,
  "CurrencyWarsEnable": false,
  "CurrencyWarsPolicy": 0,
  "CurrencyWarsRunTimes": 0,
  "CurrencyWarsUsername": "",
  "StartGameAlwaysLogin": false,
  "StartGameAutoLogin": false,
  "StartGameChannel": 0,
  "StartGamePath": "",
  "TrailblazePowerChangeLineup": false,
  "TrailblazePowerLineupCheck": false,
  "TrailblazePowerReplenishStamina": false,
  "TrailblazePowerReplenishTimes": 0,
  "TrailblazePowerReplenishWay": 0,
  "TrailblazePowerTaskList": [],
  "TrailblazePowerUseAssistant": false,
  "TrailblazePowerUseSkill": false
}
```

### 任务启用状态索引对应关系

| 索引 | 任务名称 | SRA窗口选项 |
|------|----------|-------------|
| 0 | 启动游戏 | `启动游戏` 复选框 |
| 1 | 清体力 | `清体力` 复选框 |
| 2 | 领取奖励 | `领取奖励` 复选框 |
| 3 | 模拟宇宙 | `模拟宇宙` 复选框 |
| 4 | 任务完成后 | `任务完成后` 复选框 |

### 奖励领取状态索引对应关系

| 索引 | 奖励类型 | SRA窗口选项 |
|------|----------|-------------|
| 0 | 漫游签证 | `漫游签证` 复选框 |
| 1 | 派遣 | `派遣` 复选框 |
| 2 | 邮件 | `邮件` 复选框 |
| 3 | 每日实训 | `每日实训` 复选框 |
| 4 | 无名勋礼 | `无名勋礼` 复选框 |
| 5 | 巡星之礼 | `巡星之礼` 复选框 |
| 6 | 兑换码 | `兑换码` 复选框 |

### 体力任务类型 (TrailblazePowerTaskList)

```json
{
  "Name": "饰品提取",        // 任务名称
  "Level": 1,               // 关卡索引 (1开始)
  "LevelName": "月下朱殷（妖精/海隅）",  // 关卡显示名称
  "Count": 1,               // 连续作战次数 (1-6)
  "RunTimes": 3             // 执行次数 (1-99)
}
```

#### 可用任务类型
1. **饰品提取** - 40体力消耗
2. **拟造花萼（金）** - 10体力消耗，可连续作战
3. **拟造花萼（赤）** - 10体力消耗，可连续作战
4. **凝滞虚影** - 30体力消耗
5. **侵蚀隧洞** - 40体力消耗
6. **历战余响** - 30体力消耗

---

## 🔧 系统设置详解

```json
{
  "ThreadSafety": false,                // 是否启用线程安全模式 (已过时)
  "BackgroundOpacity": 0.9,             // 背景透明度 (0-1.0)
  "Language": 1,                        // 界面语言 (0=English, 1=简体中文)
  "Zoom": 1.0,                          // 屏幕缩放比例 (0-5.0)
  "ConfidenceThreshold": 0.9,           // 识图置信度阈值 (0-1.0)
  "DownloadChannel": 1,                 // 更新下载渠道 (0=Mirror酱, 1=GitHub)
  "AppChannel": 0,                      // 应用渠道 (0=stable, 1=beta)
  "MirrorChyanCdk": "",                 // Mirror酱CDK密钥 (24位字符)
  "EnableAutoUpdate": true,             // 是否启用自动更新
  "Proxies": ["https://tvv.tw/"],       // 代理列表
  "DefaultPage": 0,                     // 启动时默认页面索引
  "AllowNotifications": true,           // 是否允许通知
  "AllowSystemNotifications": true,     // 是否允许系统通知
  "AllowEmailNotifications": false,     // 是否允许邮件通知
  "EnableStartupLaunch": false,         // 是否启用开机自启动 (需要管理员权限)
  "EnableMinimizeToTray": false         // 是否启用最小化到托盘
}
```

### 设置项详细说明

| 设置项 | 类型 | 范围 | 默认值 | 中文说明 |
|--------|------|------|--------|----------|
| `ThreadSafety` | bool | true/false | false | 线程安全模式 (已过时) |
| `BackgroundOpacity` | double | 0.0-1.0 | 0.9 | 背景图片不透明度 |
| `Language` | int | 0-1 | 1 | 界面语言 (0=英文, 1=简体中文) |
| `Zoom` | double | 0.0-5.0 | 1.0 | 屏幕缩放比例 |
| `ConfidenceThreshold` | double | 0.0-1.0 | 0.9 | 识图置信度阈值 |
| `DownloadChannel` | int | 0-1 | 1 | 更新下载渠道 (0=Mirror酱, 1=GitHub) |
| `AppChannel` | int | 0-1 | 0 | 应用渠道 (0=稳定版, 1=测试版) |
| `MirrorChyanCdk` | string | 24位字符 | "" | Mirror酱CDK密钥 |
| `EnableAutoUpdate` | bool | true/false | true | 自动更新开关 |
| `Proxies` | string[] | URL列表 | ["https://tvv.tw/"] | 下载代理服务器列表 |
| `DefaultPage` | int | 0-4 | 0 | 默认起始页面索引 |
| `AllowNotifications` | bool | true/false | true | 允许通知开关 |
| `AllowSystemNotifications` | bool | true/false | true | 系统通知开关 |
| `AllowEmailNotifications` | bool | true/false | false | 邮件通知开关 |
| `EnableStartupLaunch` | bool | true/false | false | 开机自启动开关 |
| `EnableMinimizeToTray` | bool | true/false | false | 最小化到托盘开关 |

---

## 🚀 进程执行系统

### SRA-cli进程启动配置

```csharp
ProcessStartInfo startInfo = {
    FileName: "SRA-cli.exe",           // 执行程序名称
    Arguments: "--inline",             // 启动参数 (内联模式)
    RedirectStandardOutput: true,      // 重定向标准输出
    RedirectStandardError: true,       // 重定向错误输出
    RedirectStandardInput: true,       // 重定向标准输入
    UseShellExecute: false,            // 不使用Shell执行
    CreateNoWindow: true               // 不创建控制台窗口
}
```

### 任务执行命令

```csharp
// 执行默认配置的任务
SendInput("task run");

// 执行指定配置的任务
SendInput($"task run {configName}");
```

### 状态监控标志

| 标志 | 检测条件 | 状态变化 | 说明 |
|------|----------|----------|------|
| `[Start]` | 输出中包含 `"[Start]"` 字符串 | `IsRunning = true` | 任务开始执行 |
| `[Done]` | 输出中包含 `"[Done]"` 字符串 | `IsRunning = false` | 任务执行完成 |

### 日志记录系统

#### 日志文件位置
```
%APPDATA%\SRA\logs\sra.log
```

#### 日志配置
- **滚动策略**: 按天拆分日志文件
- **保留期限**: 保留最近7天的日志
- **编码**: UTF-8 (避免中文乱码)
- **日志级别**:
  - 全局: Information
  - 服务层: Debug

---

## 🔄 更新系统

### Mirror酱CDK用途

#### CDK主要功能
1. **高速下载服务激活** - 提供比GitHub更快的下载速度
2. **版本检查API参数** - 在版本检查时传递CDK
3. **获取专属下载URL** - 有效CDK返回Mirror酱专属下载地址

#### CDK验证流程
```csharp
// 1. 基础长度校验 (24位字符)
if (value.Length != 24) {
    Cache.CdkStatus = "CDK长度错误，应为24位字符";
    return;
}

// 2. 异步验证
var response = await _updateService.VerifyCdkAsync(cdk);

// 3. 状态显示
if (response.Code == 0) {
    // 有效CDK，显示到期时间
    var leastTime = DateTimeOffset.FromUnixTimeSeconds(response.Data.CdkExpiredTime);
    Cache.CdkStatus = $"有效的CDK 到期时间: {leastTime:yyyy-MM-dd HH:mm:ss}";
} else {
    // 无效CDK，显示错误信息
    Cache.CdkStatus = _updateService.GetErrorMessage(response.Code);
}
```

### 版本检查API

#### API端点
```csharp
private const string BaseVersionUrl = "https://mirrorchyan.com/api/resources/StarRailAssistant/latest";
```

#### 请求参数
```csharp
// 构建查询参数
var queryParams = new List<string>();
if (!string.IsNullOrEmpty(currentVersion)) queryParams.Add($"current_version={currentVersion}");
if (!string.IsNullOrEmpty(cdk)) queryParams.Add($"cdk={cdk}");
if (!string.IsNullOrEmpty(channel)) queryParams.Add($"channel={channel}");
if (queryParams.Count > 0) url += "?user_agent=SRA_avalonia" + string.Join("&", queryParams);
```

### 下载逻辑

#### 下载URL获取策略
```csharp
private string GetDownloadUrl(VersionResponse versionResponse, int downloadChannel)
{
    // downloadChannel: 0=Mirror酱, 1=GitHub
    if (versionResponse.Data.Url == "" || downloadChannel == 1)
        return BaseDownloadUrl.Replace("{version}", versionResponse.Data.VersionName);
    return versionResponse.Data.Url;
}
```

#### 默认下载URL
```csharp
private const string BaseDownloadUrl =
    "https://github.com/Shasnow/StarRailAssistant/releases/download/{version}/StarRailAssistant_{version}.zip";
```

#### 代理下载机制
```csharp
// 生成候选下载地址
var downloadCandidates = new List<string>();
if (downloadChannel == 1) {  // GitHub渠道使用代理
    if (proxies is not null)
        downloadCandidates.AddRange(proxies.Select(proxy =>
            $"{proxy.TrimEnd('/')}/{downloadUrl.TrimStart('/')}"));
}
downloadCandidates.Add(downloadUrl);  // 直连地址

// 依次尝试下载
foreach (var candidateUrl in downloadCandidates) {
    try {
        await DownloadFileWithDetailsAsync(candidateUrl, savePath, statusProgress, cancellationToken);
        downloadSuccess = true;
        break;
    } catch {
        // 代理失败，尝试下一个
    }
}
```

### 下载进度监控

#### DownloadStatus结构
```csharp
public class DownloadStatus
{
    public float ProgressPercent { get; init; }        // 进度百分比 (0-100)
    public long TotalBytes { get; init; }              // 总字节数
    public long DownloadedBytes { get; init; }         // 已下载字节数
    public double BytesPerSecond { get; init; }        // 下载速度 (字节/秒)
    public string FormattedSpeed { get; }              // 格式化速度 (如 "1.2 MB/s")
    public string FormattedTotalSize { get; }          // 格式化总大小 (如 "2.5 GB")
    public string FormattedDownloadedSize { get; }     // 格式化已下载大小
}
```

#### 速度计算逻辑
```csharp
// 每500ms更新一次速度
var now = DateTime.UtcNow;
var elapsed = now - lastUpdateTime;
if (elapsed.TotalMilliseconds >= 500) {
    currentSpeed = bytesSinceLastUpdate / elapsed.TotalSeconds;
    lastUpdateTime = now;
    bytesSinceLastUpdate = 0;
}
```

### CDK安全存储

#### 加密处理
```csharp
// 加载时解密
if (Settings.MirrorChyanCdk == "") return;
Settings.MirrorChyanCdk = EncryptUtil.DecryptString(Settings.MirrorChyanCdk);

// 保存时加密
if (Settings.MirrorChyanCdk != "")
    Settings.MirrorChyanCdk = EncryptUtil.EncryptString(Settings.MirrorChyanCdk);
```

#### Windows数据保护API
```csharp
public static string EncryptString(string input)
{
    var inputBytes = Encoding.UTF8.GetBytes(input);
    byte[] encryptedBytes;
    if (OperatingSystem.IsWindows()) {
        encryptedBytes = ProtectedData.Protect(inputBytes, null, DataProtectionScope.CurrentUser);
    } else {
        encryptedBytes = inputBytes;
    }
    return Convert.ToBase64String(encryptedBytes);
}
```

---

## 🖥️ UI界面结构

### 主窗口布局

#### 页面导航结构
```xml
<suki:SukiSideMenu ItemsSource="{Binding Pages}">
    <!-- 页面列表 -->
    <suki:SukiSideMenu.ItemTemplate>
        <DataTemplate>
            <suki:SukiSideMenuItem Classes="Compact" Header="{Binding DisplayName}">
                <suki:SukiSideMenuItem.Icon>
                    <Label Classes="icon" FontSize="18" Content="{Binding IconText}" />
                </suki:SukiSideMenuItem.Icon>
            </suki:SukiSideMenuItem>
        </DataTemplate>
    </suki:SukiSideMenu.ItemTemplate>
</suki:SukiSideMenu>
```

#### 页面定义
| 页面名称 | 显示名称 | 图标 | 功能描述 |
|----------|----------|------|----------|
| `Home` | 主页 | `\uE2C2` | 显示控制面板和背景图片 |
| `Task` | 任务 | `\uE1BC` | 游戏任务配置页面 |
| `Extension` | 拓展 | `\uE1D3` | 扩展功能页面 |
| `Console` | 控制台 | `\uEAE8` | 后端日志显示页面 |
| `Setting` | 设置 | `\uE272` | 系统设置页面 |

### 控制面板 (ControlPanel)

#### 功能组件
- **配置管理**: 添加、删除、选择配置
- **启动控制**: 启动模式选择、开始/停止按钮
- **状态显示**: 运行状态指示

#### 启动模式
- **Current**: 执行当前选中的配置
- **All**: 执行所有配置

### 控制台页面

#### 功能特性
- **实时日志显示**: 显示后端进程的所有输出
- **自动滚动**: 新日志自动滚动到底部
- **命令输入**: 支持手动输入命令到后端进程

---

## 🌐 API接口

### 版本检查API
- **URL**: `https://mirrorchyan.com/api/resources/StarRailAssistant/latest`
- **方法**: GET
- **参数**:
  - `current_version`: 当前版本号
  - `cdk`: Mirror酱CDK密钥
  - `channel`: 更新通道 (stable/beta)

### 公告API
- **URL**: `https://gitee.com/yukikage/sraresource/raw/main/SRA/announcements.json`
- **方法**: GET
- **返回**: 公告列表JSON

### CDK验证API
- **URL**: `https://mirrorchyan.com/api/resources/StarRailAssistant/latest?cdk={cdk}`
- **方法**: GET
- **返回**: 版本响应包含CDK验证结果

### 版本响应结构
```json
{
  "code": 0,
  "msg": "success",
  "data": {
    "version_name": "2.0.0",
    "version_number": 200,
    "url": "https://mirrorchyan.com/download/...",
    "sha256": "...",
    "channel": "stable",
    "os": "windows",
    "arch": "x64",
    "update_type": "full",
    "filesize": 10485760,
    "cdk_expired_time": 1735689600,
    "release_note": "更新说明..."
  }
}
```

---

## ⚠️ 错误处理

### CDK错误代码

| 错误代码 | 错误描述 | 中文说明 |
|----------|----------|----------|
| 1001 | 获取版本信息的URL参数不正确 | URL参数错误 |
| 7001 | 填入的 CDK 已过期 | CDK已过期 |
| 7002 | 填入的 CDK 错误 | CDK错误 |
| 7003 | 填入的 CDK 今日下载次数已达上限 | 下载次数超限 |
| 7004 | 填入的 CDK 类型和待下载的资源不匹配 | CDK类型不匹配 |
| 7005 | 填入的 CDK 已被封禁 | CDK被封禁 |
| 8001 | 对应架构和系统下的资源不存在 | 资源不存在 |
| 8002 | 错误的系统参数 | 系统参数错误 |
| 8003 | 错误的架构参数 | 架构参数错误 |
| 8004 | 错误的更新通道参数 | 更新通道错误 |

### 状态显示颜色
- **红色 (#F5222D)**: 错误状态
- **黄色 (#FAAD14)**: 验证中状态
- **绿色 (#279F27)**: 有效状态

### 进程异常处理
```csharp
// 进程启动失败
catch (Exception e) {
    _logger.LogError("Failed to start SRA process: {Message}", e.Message);
}

// 进程停止失败
catch (InvalidOperationException e) {
    _logger.LogError("Failed to stop SRA process: {Message}", e.Message);
}
```

---

## 🎮 完整关卡列表

### 1. 饰品提取 (40体力消耗)

| 索引 | 关卡名称 | 中文说明 |
|------|----------|----------|
| 0 | ---选择副本--- | 占位选项 |
| 1 | 月下朱殷（妖精/海隅） | 妖精套/海隅套 |
| 2 | 纷争不休（拾骨地/巨树） | 拾骨套/巨树套 |
| 3 | 蠹役饥肠（露莎卡/蕉乐园） | 露莎卡套/蕉乐园套 |
| 4 | 永恒笑剧（都蓝/劫火） | 都蓝套/劫火套 |
| 5 | 伴你入眠（茨冈尼亚/出云显世） | 茨冈尼亚套/出云显世套 |
| 6 | 天剑如雨（格拉默/匹诺康尼） | 格拉默套/匹诺康尼套 |
| 7 | 孽果盘生（繁星/龙骨） | 繁星套/龙骨套 |
| 8 | 百年冻土（贝洛伯格/萨尔索图） | 贝洛伯格套/萨尔索图套 |
| 9 | 温柔话语（公司/差分机） | 公司套/差分机套 |
| 10 | 浴火钢心（塔利亚/翁瓦克） | 塔利亚套/翁瓦克套 |
| 11 | 坚城不倒（太空封印站/仙舟） | 太空封印站套/仙舟套 |

### 2. 拟造花萼（金） (10体力消耗，可连续作战)

| 索引 | 关卡名称 | 中文说明 |
|------|----------|----------|
| 0 | ---选择副本--- | 占位选项 |
| 1 | 回忆之蕾（翁法罗斯） | 翁法罗斯地区回忆材料 |
| 2 | 以太之蕾（翁法罗斯） | 翁法罗斯地区以太材料 |
| 3 | 珍藏之蕾（翁法罗斯） | 翁法罗斯地区珍藏材料 |
| 4 | 回忆之蕾（匹诺康尼） | 匹诺康尼地区回忆材料 |
| 5 | 以太之蕾（匹诺康尼） | 匹诺康尼地区以太材料 |
| 6 | 珍藏之蕾（匹诺康尼） | 匹诺康尼地区珍藏材料 |
| 7 | 回忆之蕾（仙舟罗浮） | 仙舟罗浮地区回忆材料 |
| 8 | 以太之蕾（仙舟罗浮） | 仙舟罗浮地区以太材料 |
| 9 | 珍藏之蕾（仙舟罗浮） | 仙舟罗浮地区珍藏材料 |
| 10 | 回忆之蕾（雅利洛VI） | 雅利洛VI地区回忆材料 |
| 11 | 以太之蕾（雅利洛VI） | 雅利洛VI地区以太材料 |
| 12 | 珍藏之蕾（雅利洛VI） | 雅利洛VI地区珍藏材料 |

### 3. 拟造花萼（赤） (10体力消耗，可连续作战)

| 索引 | 关卡名称 | 中文说明 |
|------|----------|----------|
| 0 | ---选择副本--- | 占位选项 |
| 1 | 月狂獠牙（毁灭） | 毁灭命途材料 |
| 2 | 净世残刃（毀灭） | 毁灭命途材料 |
| 3 | 神体琥珀（存护） | 存护命途材料 |
| 4 | 琥珀的坚守（存护） | 存护命途材料 |
| 5 | 逆时一击（巡猎） | 巡猎命途材料 |
| 6 | 逐星之矢（巡猎） | 巡猎命途材料 |
| 7 | 万象果实（丰饶） | 丰饶命途材料 |
| 8 | 永恒之花（丰饶） | 丰饶命途材料 |
| 9 | 精致色稿（智识） | 智识命途材料 |
| 10 | 智识之钥（智识） | 智识命途材料 |
| 11 | 天外乐章（同谐） | 同谐命途材料 |
| 12 | 群星乐章（同谐） | 同谐命途材料 |
| 13 | 焚天之魔（虚无） | 虚无命途材料 |
| 14 | 沉沦黑曜（虚无） | 虚无命途材料 |
| 15 | 阿赖耶华（记忆） | 记忆命途材料 |

### 4. 凝滞虚影 (30体力消耗)

| 索引 | 关卡名称 | 中文说明 |
|------|----------|----------|
| 0 | ---选择副本--- | 占位选项 |
| 1 | 侵略凝块（物理） | 物理属性突破材料 |
| 2 | 星际和平工作证（物理） | 物理属性突破材料 |
| 3 | 幽府通令（物理） | 物理属性突破材料 |
| 4 | 铁狼碎齿（物理） | 物理属性突破材料 |
| 5 | 怠火之心（火） | 火属性突破材料 |
| 6 | 过热钢刀（火） | 火属性突破材料 |
| 7 | 恒温晶壳（火） | 火属性突破材料 |
| 8 | 海妖残鰭（冰） | 冰属性突破材料 |
| 9 | 冷藏梦箱（冰） | 冰属性突破材料 |
| 10 | 苦寒晶壳（冰） | 冰属性突破材料 |
| 11 | 风雪之角（冰） | 冰属性突破材料 |
| 12 | 兽馆之钉（雷） | 雷属性突破材料 |
| 13 | 炼形者雷枝（雷） | 雷属性突破材料 |
| 14 | 往日之影的雷冠（雷） | 雷属性突破材料 |
| 15 | 暮辉烬蕾（风） | 风属性突破材料 |
| 16 | 一杯酪酊的时代（风） | 风属性突破材料 |
| 17 | 无人遗垢（风） | 风属性突破材料 |
| 18 | 暴风之眼（风） | 风属性突破材料 |
| 19 | 暗帷月华（量子） | 量子属性突破材料 |
| 20 | 炙梦喷枪（量子） | 量子属性突破材料 |
| 21 | 苍猿之钉（量子） | 量子属性突破材料 |
| 22 | 虚幻铸铁（量子） | 量子属性突破材料 |
| 23 | 纷争前兆（虚数） | 虚数属性突破材料 |
| 24 | 一曲和弦的幻景（虚数） | 虚数属性突破材料 |
| 25 | 镇灵敕符（虚数） | 虚数属性突破材料 |
| 26 | 往日之影的金饰（虚数） | 虚数属性突破材料 |

### 5. 侵蚀隧洞 (40体力消耗)

| 索引 | 关卡名称 | 中文说明 |
|------|----------|----------|
| 0 | ---选择副本--- | 占位选项 |
| 1 | 隐救之径（救世主/隐士） | 救世主套/隐士套 |
| 2 | 雳勇之径（女武神/船长） | 女武神套/船长套 |
| 3 | 弦歌之径（英豪/诗人） | 英豪套/诗人套 |
| 4 | 迷识之径（司铎套/学者套） | 司铎套/学者套 |
| 5 | 勇骑之径（铁骑套/勇烈套） | 铁骑套/勇烈套 |
| 6 | 梦潜之径（死水/钟表匠） | 死水套/钟表匠套 |
| 7 | 幽冥之径（大公/幽囚） | 大公套/幽囚套 |
| 8 | 药使之径（莳者/信使） | 莳者套/信使套 |
| 9 | 野焰之径（火匠/废土客） | 火匠套/废土客套 |
| 10 | 圣颂之径（圣骑/乐队） | 圣骑套/乐队套 |
| 11 | 睿智之径（铁卫/量子套） | 铁卫套/量子套 |
| 12 | 漂泊之径（过客/快枪手） | 过客套/快枪手套 |
| 13 | 迅拳之径（拳皇/怪盗） | 拳皇套/怪盗套 |
| 14 | 霜风之径（冰/风套） | 冰套/风套 |

### 6. 历战余响 (30体力消耗)

| 索引 | 关卡名称 | 中文说明 |
|------|----------|----------|
| 0 | ---选择副本--- | 占位选项 |
| 1 | 晨昏的回眸 | 晨昏的回眸副本 |
| 2 | 心兽的战场 | 心兽的战场副本 |
| 3 | 尘梦的赞礼 | 尘梦的赞礼副本 |
| 4 | 蛀星的旧靥 | 蛀星的旧靥副本 |
| 5 | 不死的神实 | 不死的神实副本 |
| 6 | 寒潮的落幕 | 寒潮的落幕副本 |
| 7 | 毁灭的开端 | 毁灭的开端副本 |

---

## 🎯 完整任务选项列表

### 启动游戏任务选项

| 选项名称 | 对应配置键 | 类型 | 说明 |
|----------|------------|------|------|
| 渠道 | `StartGameChannel` | 下拉框 | 游戏服务器选择 (0=官服, 1=b服) |
| 游戏路径 | `StartGamePath` | 文本框 | 游戏可执行文件路径 |
| 自动登录 | `StartGameAutoLogin` | 复选框 | 启动时自动登录游戏 |
| 总是重新登录 | `StartGameAlwaysLogin` | 复选框 | 每次启动都重新登录 |
| 账号 | `StartGameUsername` | 文本框 | 游戏账号 |
| 密码 | `StartGamePassword` | 密码框 | 游戏密码 |

### 清体力任务选项

| 选项名称 | 对应配置键 | 类型 | 说明 |
|----------|------------|------|------|
| 补充体力 | `TrailblazePowerReplenishStamina` | 复选框 | 是否补充体力 |
| 补充体力方式 | `TrailblazePowerReplenishWay` | 下拉框 | 补充方式 (0=后备开拓力, 1=燃料, 2=星琼) |
| 使用支援角色 | `TrailblazePowerUseAssistant` | 复选框 | 是否使用支援角色 |
| 重新编队 | `TrailblazePowerChangeLineup` | 复选框 | 是否重新编队 |
| 编队检查 | `TrailblazePowerLineupCheck` | 复选框 | 是否检查阵容 |
| 使用战技入场 | `TrailblazePowerUseSkill` | 复选框 | 是否使用战技入场 |
| 选择关卡 | - | 下拉框 | 选择具体副本关卡 |
| 连续作战 | - | 数字框 | 连续作战次数 (1-6) |
| 执行次数 | - | 数字框 | 任务执行次数 (1-99) |

### 领取奖励任务选项

| 选项名称 | 对应配置键 | 类型 | 说明 |
|----------|------------|------|------|
| 漫游签证 | `ReceiveRewards[0]` | 复选框 | 领取漫游签证奖励 |
| 派遣 | `ReceiveRewards[1]` | 复选框 | 领取派遣奖励 |
| 邮件 | `ReceiveRewards[2]` | 复选框 | 领取邮件奖励 |
| 每日实训 | `ReceiveRewards[3]` | 复选框 | 领取每日实训奖励 |
| 无名勋礼 | `ReceiveRewards[4]` | 复选框 | 领取无名勋礼奖励 |
| 巡星之礼 | `ReceiveRewards[5]` | 复选框 | 领取巡星之礼奖励 |
| 兑换码 | `ReceiveRewards[6]` | 复选框 | 输入和兑换游戏兑换码 |
| 兑换码填写处 | `ReceiveRewardRedeemCodes` | 文本框 | 输入兑换码 |

### 模拟宇宙任务选项

| 选项名称 | 对应配置键 | 类型 | 说明 |
|----------|------------|------|------|
| 模式 | `SimulatedUniverseMode` | 下拉框 | 模拟宇宙模式 (0=普通模式, 1=困难模式) |
| 次数 | `SimulatedUniverseTimes` | 数字框 | 运行次数 (1-99999) |

### 任务完成后选项

| 选项名称 | 对应配置键 | 类型 | 说明 |
|----------|------------|------|------|
| 登出当前账号 | `AfterLogout` | 复选框 | 任务完成后登出游戏账号 |
| 退出游戏 | `AfterExitGame` | 复选框 | 任务完成后退出游戏 |
| 关闭程序 | `AfterExitApp` | 复选框 | 任务完成后关闭SRA程序 |
| 关机 | `AfterShutdown` | 单选按钮 | 任务完成后关机 |
| 休眠 | `AfterSleep` | 单选按钮 | 任务完成后休眠 |
| 无动作 | - | 单选按钮 | 不执行任何操作 |
